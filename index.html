<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smash Ultimate Pairwise Ranker</title>
  <style>
    html, body {
    background: black;
    color: white;
    font-family: "Times New Roman", Times, serif;
    margin: 0;
    padding: 20px;
  }

  h1, h2, h3 {
    font-weight: normal;
  }

  button {
    background: black;
    color: white;
    border: 1px solid white;
    padding: 6px 10px;
    margin-right: 6px;
    font-family: inherit;
    cursor: pointer;
  }

  button:hover {
    background: white;
    color: black;
  }

  .pair {
    display: flex;
    gap: 40px;
    margin: 20px 0;
  }

  .fighter {
    flex: 1;
    text-align: center;
    cursor: pointer;
  }

  img.portrait {
    width: 120px;
    height: auto;
    display: block;
    margin: 0 auto 10px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }

  th, td {
    border-bottom: 1px solid white;
    padding: 4px 6px;
    text-align: left;
  }

  th {
    font-weight: normal;
  }
    /* body {
    background: black;
    color: white;
  } */
    /* :root{--bg:#0f172a;--card:#0b1220;--muted:#94a3b8;--accent:#60a5fa;--glass:rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#041026 0%, #071428 50%);color:#e6eef8;padding:20px}
    .container{max-width:980px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px}
    h1{margin:0;font-size:20px}
    p.lead{color:var(--muted);margin:6px 0 18px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.6);}
    .pair{display:flex;gap:12px;align-items:stretch}
    .fighter{flex:1;padding:18px;border-radius:10px;background:var(--glass);cursor:pointer;display:flex;flex-direction:column;justify-content:center;align-items:center;border:1px solid rgba(255,255,255,0.03);transition:transform .08s ease,box-shadow .08s}
    .fighter:hover{transform:translateY(-4px);box-shadow:0 10px 30px rgba(0,0,0,0.6)}
    .fighter .name{font-weight:600;font-size:16px;text-align:center}
    .fighter .meta{color:var(--muted);font-size:13px;margin-top:8px;text-align:center}
    .portrait{width:120px;height:120px;object-fit:contain;margin-bottom:10px;border-radius:12px;background:rgba(255,255,255,0.03);padding:6px}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:var(--accent);color:#01223a;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
    .ranklist{margin-top:14px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:6px 8px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.02)}
    th{color:var(--muted);font-size:13px}
    td.namecell{font-weight:600}
    .small{font-size:13px;color:var(--muted)}
    .topbar{display:flex;justify-content:space-between;gap:12px;align-items:center;margin-bottom:12px}
    .export{background:linear-gradient(90deg,#86efac,#60a5fa);color:#05201a}
    footer{color:var(--muted);text-align:center;margin-top:18px}
    @media(max-width:700px){.pair{flex-direction:column}.fighter{padding:12px}} */

    .controls {
      margin: 10px 0;
    }

    .controls button {
      width: 100%;
      max-width: 400px;
    }
    
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Super Smash Bros. Ultimate - Fighter Elo Ranking</h1>
        <p class="lead">Click which fighter you think is better. Uses an Elo system.</p>
      </div>
    </header>

    <div class="card">
      <div class="topbar">
        <div class="small">Fighters: <strong id="count">82</strong> • Possible unique matchups: <strong id="totalPairs">-</strong></div>
        <div class="small">Matches recorded: <strong id="matchesRecorded">0</strong></div>
      </div>

      <div id="pairArea">
        <div class="pair">
          <div id="left" class="fighter" onclick="choose('left')"></div>
          <div id="right" class="fighter" onclick="choose('right')"></div>
        </div>

        <div class="controls">
          <button onclick="skipPair()" class="secondary">Skip</button>
        </div>
          <!-- <button onclick="generatePair()" class="secondary">New Pair</button> -->
          <!-- <button onclick="finish()">I'm done</button> -->
        <div>
          <button onclick="resetAll()" class="secondary">Reset data</button>
          <!-- <button onclick="exportJSON()" class="export">Export JSON</button> -->
        </div>
      </div>

      <div class="list card" style="margin-top:14px;">
        <h3 style="margin-top:0">Live rankings</h3>
        <div style="max-height:360px;overflow:auto;padding-right:8px">
          <table id="rankTable">
            <thead><tr><th>#</th><th>Name</th><th>Elo</th><th class="small">W</th><th class="small">L</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

<script>
//Fighters with online images from SmashWiki
const FIGHTERS = [
  {name: "Mario", image: "https://www.ssbwiki.com/images/thumb/4/44/Mario_SSBU.png/600px-Mario_SSBU.png?04f61"},
  {name: "Donkey Kong", image: "https://www.ssbwiki.com/images/thumb/c/c9/Donkey_Kong_SSBU.png/600px-Donkey_Kong_SSBU.png?eaeca"},
  {name: "Link", image: "https://www.ssbwiki.com/images/thumb/8/84/Link_SSBU.png/600px-Link_SSBU.png?c3c4d"},
  {name: "Samus/Dark Samus", image: "./samus.png"},
  {name: "Yoshi", image: "https://www.ssbwiki.com/images/thumb/8/8d/Yoshi_SSBU.png/600px-Yoshi_SSBU.png?6e636"},
  {name: "Kirby", image: "https://www.ssbwiki.com/images/thumb/0/07/Kirby_SSBU.png/600px-Kirby_SSBU.png?2b27a"},
  {name: "Fox", image: "https://www.ssbwiki.com/images/thumb/2/2f/Fox_SSBU.png/600px-Fox_SSBU.png?ced8f"},
  {name: "Pikachu", image: "https://www.ssbwiki.com/images/thumb/9/93/Pikachu_SSBU.png/600px-Pikachu_SSBU.png?641bd"},
  {name: "Luigi", image: "https://www.ssbwiki.com/images/thumb/b/bb/Luigi_SSBU.png/547px-Luigi_SSBU.png?98af0"},
  {name: "Ness", image: "https://www.ssbwiki.com/images/thumb/8/82/Ness_SSBU.png/600px-Ness_SSBU.png?74584"},
  {name: "Captain Falcon", image: "https://www.ssbwiki.com/images/thumb/d/da/Captain_Falcon_SSBU.png/600px-Captain_Falcon_SSBU.png?aec93"},
  {name: "Jigglypuff", image: "https://www.ssbwiki.com/images/thumb/6/6a/Jigglypuff_SSBU.png/600px-Jigglypuff_SSBU.png?a2c18"},
  {name: "Peach/Daisy", image: "./peachdaisy.png"},
  {name: "Bowser", image: "https://www.ssbwiki.com/images/thumb/4/49/Bowser_SSBU.png/600px-Bowser_SSBU.png?3df64"},
  {name: "Ice Climbers", image: "https://www.ssbwiki.com/images/thumb/1/12/Ice_Climbers_SSBU.png/600px-Ice_Climbers_SSBU.png?dc85a"},
  {name: "Sheik", image: "https://www.ssbwiki.com/images/thumb/0/00/Sheik_SSBU.png/600px-Sheik_SSBU.png?23081"},
  {name: "Zelda", image: "https://www.ssbwiki.com/images/thumb/c/c8/Zelda_SSBU.png/600px-Zelda_SSBU.png?21603"},
  {name: "Dr. Mario", image: "https://www.ssbwiki.com/images/thumb/3/3f/Dr._Mario_SSBU.png/600px-Dr._Mario_SSBU.png?0ac29"},
  {name: "Pichu", image: "https://www.ssbwiki.com/images/thumb/c/c1/Pichu_SSBU.png/600px-Pichu_SSBU.png?e7b4c"},
  {name: "Falco", image: "https://www.ssbwiki.com/images/thumb/8/80/Falco_SSBU.png/600px-Falco_SSBU.png?8947a"},
  {name: "Marth", image: "https://www.ssbwiki.com/images/thumb/e/e9/Marth_SSBU.png/600px-Marth_SSBU.png?172cc"},
  {name: "Lucina", image: "https://www.ssbwiki.com/images/thumb/d/dc/Lucina_SSBU.png/600px-Lucina_SSBU.png?46377"},
  {name: "Young Link", image: "https://www.ssbwiki.com/images/thumb/8/8a/Young_Link_SSBU.png/600px-Young_Link_SSBU.png?cd367"},
  {name: "Ganondorf", image: "https://www.ssbwiki.com/images/thumb/9/91/Ganondorf_SSBU.png/595px-Ganondorf_SSBU.png?a7dba"},
  {name: "Mewtwo", image: "https://www.ssbwiki.com/images/thumb/d/de/Mewtwo_SSBU.png/594px-Mewtwo_SSBU.png?9c33d"},
  {name: "Roy", image: "https://www.ssbwiki.com/images/thumb/9/9d/Roy_SSBU.png/600px-Roy_SSBU.png?6ded3"},
  {name: "Chrom", image: "https://www.ssbwiki.com/images/thumb/5/57/Chrom_SSBU.png/510px-Chrom_SSBU.png?9e715"},
  {name: "Mr. Game & Watch", image: "https://www.ssbwiki.com/images/thumb/c/cb/Mr._Game_%26_Watch_SSBU.png/600px-Mr._Game_%26_Watch_SSBU.png?d0b41"},
  {name: "Meta Knight", image: "https://www.ssbwiki.com/images/thumb/0/00/Meta_Knight_SSBU.png/600px-Meta_Knight_SSBU.png?5fbe9"},
  {name: "Pit/Dark Pit", image: "./pits.png"},
  {name: "Zero Suit Samus", image: "https://www.ssbwiki.com/images/thumb/f/f0/Zero_Suit_Samus_SSBU.png/600px-Zero_Suit_Samus_SSBU.png?51df7"},
  {name: "Wario", image: "https://www.ssbwiki.com/images/thumb/0/04/Wario_SSBU.png/600px-Wario_SSBU.png?54ad1"},
  {name: "Snake", image: "https://www.ssbwiki.com/images/thumb/0/02/Snake_SSBU.png/492px-Snake_SSBU.png?3368c"},
  {name: "Ike", image: "https://www.ssbwiki.com/images/thumb/8/86/Ike_SSBU.png/600px-Ike_SSBU.png?0d3bd"},
  {name: "Pokemon Trainer", image: "https://www.ssbwiki.com/images/thumb/0/0f/Pok%C3%A9mon_Trainer_SSBU.png/800px-Pok%C3%A9mon_Trainer_SSBU.png?2cac1"},
  {name: "Diddy Kong", image: "https://www.ssbwiki.com/images/thumb/a/a7/Diddy_Kong_SSBU.png/579px-Diddy_Kong_SSBU.png?1c255"},
  {name: "Lucas", image: "https://www.ssbwiki.com/images/thumb/8/81/Lucas_SSBU.png/600px-Lucas_SSBU.png?be299"},
  {name: "Sonic", image: "https://www.ssbwiki.com/images/thumb/b/ba/Sonic_SSBU.png/609px-Sonic_SSBU.png?c2db0"},
  {name: "King Dedede", image: "https://www.ssbwiki.com/images/thumb/f/f5/King_Dedede_SSBU.png/600px-King_Dedede_SSBU.png?c3c4b"},
  {name: "Olimar", image: "https://www.ssbwiki.com/images/thumb/b/b3/Olimar_SSBU.png/600px-Olimar_SSBU.png?a71a2"},
  {name: "Lucario", image: "https://www.ssbwiki.com/images/thumb/0/08/Lucario_SSBU.png/600px-Lucario_SSBU.png?695eb"},
  {name: "R.O.B.", image: "https://www.ssbwiki.com/images/thumb/6/60/R.O.B._SSBU.png/600px-R.O.B._SSBU.png?b37ef"},
  {name: "Toon Link", image: "https://www.ssbwiki.com/images/thumb/5/56/Toon_Link_SSBU.png/569px-Toon_Link_SSBU.png?26846"},
  {name: "Wolf", image: "https://www.ssbwiki.com/images/thumb/8/8a/Wolf_SSBU.png/647px-Wolf_SSBU.png?0600c"},
  {name: "Villager", image: "https://www.ssbwiki.com/images/thumb/a/ac/Villager_SSBU.png/600px-Villager_SSBU.png?0890c"},
  {name: "Mega Man", image: "https://www.ssbwiki.com/images/thumb/4/46/Mega_Man_SSBU.png/600px-Mega_Man_SSBU.png?dd7e6"},
  {name: "Wii Fit Trainer", image: "https://www.ssbwiki.com/images/thumb/f/ff/Wii_Fit_Trainer_SSBU.png/600px-Wii_Fit_Trainer_SSBU.png?f3628"},
  {name: "Rosalina & Luma", image: "https://www.ssbwiki.com/images/thumb/1/16/Rosalina_%26_Luma_SSBU.png/600px-Rosalina_%26_Luma_SSBU.png?8df3e"},
  {name: "Little Mac", image: "https://www.ssbwiki.com/images/thumb/5/53/Little_Mac_SSBU.png/600px-Little_Mac_SSBU.png?40234"},
  {name: "Greninja", image: "https://www.ssbwiki.com/images/thumb/d/da/Greninja_SSBU.png/600px-Greninja_SSBU.png?eef65"},
  {name: "Palutena", image: "https://www.ssbwiki.com/images/thumb/6/6b/Palutena_SSBU.png/568px-Palutena_SSBU.png?50d41"},
  {name: "PAC-MAN", image: "https://www.ssbwiki.com/images/thumb/0/03/Pac-Man_SSBU.png/600px-Pac-Man_SSBU.png?3663c"},
  {name: "Robin", image: "https://www.ssbwiki.com/images/thumb/8/82/Robin_SSBU.png/600px-Robin_SSBU.png?48871"},
  {name: "Shulk", image: "https://www.ssbwiki.com/images/thumb/0/0f/Shulk_SSBU.png/600px-Shulk_SSBU.png?3df01"},
  {name: "Bowser Jr.", image: "https://www.ssbwiki.com/images/thumb/2/2b/Bowser_Jr._SSBU.png/600px-Bowser_Jr._SSBU.png?a4c7f"},
  {name: "Duck Hunt", image: "https://www.ssbwiki.com/images/thumb/d/d8/Duck_Hunt_SSBU.png/600px-Duck_Hunt_SSBU.png?93950"},
  {name: "Ryu", image: "https://www.ssbwiki.com/images/thumb/6/61/Ryu_SSBU.png/600px-Ryu_SSBU.png?11dab"},
  {name: "Ken", image: "https://www.ssbwiki.com/images/thumb/f/f6/Ken_SSBU.png/600px-Ken_SSBU.png?f93c0"},
  {name: "Cloud", image: "https://www.ssbwiki.com/images/thumb/b/b3/Cloud_SSBU.png/600px-Cloud_SSBU.png?7c2b9"},
  {name: "Corrin", image: "https://www.ssbwiki.com/images/thumb/c/c4/Corrin_SSBU.png/600px-Corrin_SSBU.png?de9e8"},
  {name: "Bayonetta", image: "https://www.ssbwiki.com/images/thumb/7/7c/Bayonetta_SSBU.png/611px-Bayonetta_SSBU.png?2c193"},
  {name: "Inkling", image: "https://www.ssbwiki.com/images/thumb/2/2e/Inkling_SSBU.png/603px-Inkling_SSBU.png?b7948"},
  {name: "Ridley", image: "https://www.ssbwiki.com/images/thumb/2/27/Ridley_SSBU.png/600px-Ridley_SSBU.png?fa328"},
  {name: "Simon/Richter", image: "./belmonts.png"},
  {name: "King K. Rool", image: "https://www.ssbwiki.com/images/thumb/b/b6/King_K._Rool_SSBU.png/600px-King_K._Rool_SSBU.png?94d39"},
  {name: "Isabelle", image: "https://www.ssbwiki.com/images/thumb/2/2b/Isabelle_SSBU.png/600px-Isabelle_SSBU.png?f09f3"},
  {name: "Incineroar", image: "https://www.ssbwiki.com/images/thumb/c/c4/Incineroar_SSBU.png/600px-Incineroar_SSBU.png?2efa0"},
  {name: "Piranha Plant", image: "https://www.ssbwiki.com/images/thumb/f/f0/Piranha_Plant_SSBU.png/600px-Piranha_Plant_SSBU.png?ab23b"},
  {name: "Joker", image: "https://www.ssbwiki.com/images/thumb/5/5c/Joker_SSBU.png/600px-Joker_SSBU.png?77feb"},
  {name: "Hero", image: "https://www.ssbwiki.com/images/thumb/0/07/Hero_SSBU.png/600px-Hero_SSBU.png?04c24"},
  {name: "Banjo & Kazooie", image: "https://www.ssbwiki.com/images/thumb/9/97/Banjo_%26_Kazooie_SSBU.png/600px-Banjo_%26_Kazooie_SSBU.png?54adc"},
  {name: "Terry", image: "https://www.ssbwiki.com/images/thumb/f/f5/Terry_SSBU.png/600px-Terry_SSBU.png?e5810"},
  {name: "Byleth", image: "https://www.ssbwiki.com/images/thumb/3/3d/Byleth_SSBU.png/600px-Byleth_SSBU.png?7e694"},
  {name: "Min Min", image: "https://www.ssbwiki.com/images/thumb/3/35/Min_Min_SSBU.png/600px-Min_Min_SSBU.png?0ab8d"},
  {name: "Steve", image: "https://www.ssbwiki.com/images/thumb/3/3a/Steve_SSBU.png/439px-Steve_SSBU.png?8004d"},
  {name: "Sephiroth", image: "https://www.ssbwiki.com/images/thumb/4/49/Sephiroth_SSBU.png/600px-Sephiroth_SSBU.png?970be"},
  {name: "Pyra/Mythra", image: "https://www.ssbwiki.com/images/thumb/7/76/Pyra_%26_Mythra_SSBU.png/800px-Pyra_%26_Mythra_SSBU.png?d9ba7"},
  {name: "Kazuya", image: "https://www.ssbwiki.com/images/thumb/d/d9/Kazuya_SSBU.png/600px-Kazuya_SSBU.png?98ba3"},
  {name: "Sora", image: "https://www.ssbwiki.com/images/thumb/2/2d/Sora_SSBU.png/600px-Sora_SSBU.png?a886e"},
  {name: "Mii Brawler", image: "https://www.ssbwiki.com/images/thumb/e/e4/Mii_Brawler_SSBU.png/600px-Mii_Brawler_SSBU.png?e2dbf"},
  {name: "Mii Swordfighter", image: "https://www.ssbwiki.com/images/thumb/f/fa/Mii_Swordfighter_SSBU.png/600px-Mii_Swordfighter_SSBU.png?b23d1"},
  {name: "Mii Gunner", image: "https://www.ssbwiki.com/images/thumb/e/e5/Mii_Gunner_SSBU.png/600px-Mii_Gunner_SSBU.png?31e91"},
];

// // --- Fill with placeholders for all fighters if not complete ---
// while (FIGHTERS.length < 86) {
//   FIGHTERS.push({ name: `Fighter ${FIGHTERS.length+1}`, image: `https://placehold.co/120x120?text=${FIGHTERS.length+1}` });
// }

const TOTAL_PAIRS = (FIGHTERS.length * (FIGHTERS.length - 1)) / 2;
document.getElementById('count').innerText = FIGHTERS.length;
document.getElementById('totalPairs').innerText = TOTAL_PAIRS;

const STORAGE_KEY = 'smash_pairwise_state_v2';
let state = loadState() || createInitialState();

function createInitialState(){
  const fighters = FIGHTERS.map(f => ({name:f.name, image:f.image, elo:1500, wins:0, losses:0, played:0}));
  return {fighters, matches: []};
}

function loadState(){
  try{ const raw = localStorage.getItem(STORAGE_KEY); return raw ? JSON.parse(raw) : null }catch(e){return null}
}
function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); updateUI(); }

function expectedScore(ra, rb){ return 1/(1+Math.pow(10,(rb-ra)/400)); }
function updateElo(a, b, scoreA, K=32){
  const ea = expectedScore(a.elo,b.elo);
  const eb = 1-ea;
  a.elo = Math.round(a.elo + K*(scoreA - ea));
  b.elo = Math.round(b.elo + K*((1-scoreA) - eb));
}

let currentPair = null;
function generatePair(){
  const fighters = state.fighters.slice().sort((x,y)=>y.elo-x.elo);
  if(fighters.length < 2) return;
  const idx = Math.floor(Math.random() * (fighters.length-1));
  const left = fighters[idx];
  const right = fighters[idx+1];
  currentPair = {leftName:left.name, rightName:right.name};
  renderPair(left, right);
}

function renderPair(left, right){
  document.getElementById('left').innerHTML = `
    <img src="${left.image || ''}" alt="${left.name}" class="portrait">
    <div class="name">${left.name}</div>
    <div class="meta">Elo: ${left.elo} • Wins: ${left.wins} • Losses: ${left.losses}</div>
  `;
  document.getElementById('right').innerHTML = `
    <img src="${right.image || ''}" alt="${right.name}" class="portrait">
    <div class="name">${right.name}</div>
    <div class="meta">Elo: ${right.elo} • Wins: ${right.wins} • Losses: ${right.losses}</div>
  `;
}

function choose(side){
  if(!currentPair){ generatePair(); return; }
  const winnerName = side === 'left' ? currentPair.leftName : currentPair.rightName;
  const loserName = side === 'left' ? currentPair.rightName : currentPair.leftName;
  const a = state.fighters.find(f=>f.name===winnerName);
  const b = state.fighters.find(f=>f.name===loserName);
  if(!a || !b) return;
  state.matches.push({winner:winnerName, loser:loserName, time:Date.now(), aEloBefore:a.elo, bEloBefore:b.elo});
  updateElo(a,b,1);
  a.wins++; b.losses++; a.played++; b.played++;
  document.getElementById('matchesRecorded').innerText = state.matches.length;
  saveState();
  generatePair();
}

function skipPair(){ generatePair(); }
function finish(){ renderRanking(true); }
function renderRanking(showAll=false){
  const tbody = document.querySelector('#rankTable tbody');
  tbody.innerHTML = '';
  const sorted = state.fighters.slice().sort((a,b)=>b.elo - a.elo);
  const list = showAll ? sorted : sorted.slice(0,86);
  list.forEach((f,i)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${i+1}</td><td class="namecell">${f.name}</td><td>${f.elo}</td><td class="small">${f.wins}</td><td class="small">${f.losses}</td>`;
    tbody.appendChild(tr);
  });
}
function resetAll(){ if(!confirm('Reset all stored data?')) return; localStorage.removeItem(STORAGE_KEY); state = createInitialState(); saveState(); }
function exportJSON(){
  const payload = {fighters: state.fighters.slice().sort((a,b)=>b.elo-a.elo), matches: state.matches, created: new Date().toISOString()};
  const blob = new Blob([JSON.stringify(payload, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'smash_rankings_export.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
}

function updateUI(){ document.getElementById('matchesRecorded').innerText = state.matches.length; renderRanking(false); }
if(!loadState()) saveState();
updateUI();
generatePair();
</script>
</body>
</html>
